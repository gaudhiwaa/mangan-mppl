{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gaudh\\\\OneDrive\\\\Documents\\\\MPPL\\\\mangan-mppl\\\\frontend\\\\src\\\\pages\\\\AppliedVoucher.js\",\n    _s = $RefreshSig$();\n\nimport { Box, Typography } from '@mui/material';\nimport React, { useContext, useEffect, useState } from 'react';\nimport AppBarTop from '../components/AppBarTop';\nimport Voucher1 from '../assets/voucher/Voucher1.png';\nimport Voucher2 from '../assets/voucher/Voucher2.png';\nimport Voucher3 from '../assets/voucher/Voucher2.png';\nimport { PADDING } from \"../constants/Padding\";\nimport StyledButton from '../components/StyledButton';\nimport { AppContext } from '../App';\nimport { voucherModel } from '../components/API/GetAPI';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AppliedVoucher() {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [useVoucher, setUseVoucher] = useState();\n  const {\n    APIVoucher,\n    setAPIVoucher\n  } = useContext(AppContext);\n  const [flag, setFlag] = useState(1);\n  useEffect(() => {\n    const items = localStorage.getItem(\"items\");\n    if (items) setItems(items);\n    getAPI(items);\n  }, []);\n\n  const getAPI = async items => {\n    const vouchers = await voucherModel(items);\n    console.log(vouchers);\n    setAPIVoucher(vouchers);\n\n    if (flag) {\n      setUseVoucher(vouchers[0].v_use);\n      setFlag(0);\n    }\n  };\n\n  const handleVoucher = async i => {\n    console.log(APIVoucher[i].id, useVoucher);\n    if (useVoucher == true) setUseVoucher(false);else setUseVoucher(true);\n    console.log(useVoucher);\n\n    try {\n      await axios.patch(`http://localhost:8080/vouchers/${APIVoucher[i].id}`, {\n        v_use: APIVoucher[i].v_use == false ? true : false\n      }); // navigate(\"/locationlist\");\n    } catch (error) {\n      console.log(error);\n    }\n\n    getAPI(items);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(AppBarTop, {\n      text: \"Voucher\",\n      line: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this), APIVoucher.map((foods, i) => /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        borderRadius: '8px',\n        border: '1px solid #f2f2f2',\n        width: PADDING,\n        marginTop: '25px',\n        overflow: 'hidden'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: APIVoucher[i].v_image,\n        alt: \"voucher\",\n        width: \"100%\",\n        height: \"140px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          marginLeft: '13px',\n          marginTop: '10px',\n          marginRight: '13px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          sx: {\n            fontSize: '14px',\n            fontWeight: 600\n          },\n          children: APIVoucher[i].v_title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            mb: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              color: '#808080',\n              fontSize: '10px',\n              fontWeight: 500,\n              marginTop: '4px',\n              marginBottom: '15px'\n            },\n            children: APIVoucher[i].v_date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 20\n          }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n            width: \"30px\",\n            text: useVoucher ? \"Dipakai\" : \"Pakai\",\n            height: \"20px\",\n            borderRadius: \"3px\",\n            noShadow: true,\n            fontSize: \"12px\",\n            onClick: () => handleVoucher(i)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 20\n      }, this), console.log(APIVoucher[i].v_use, useVoucher)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 20\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AppliedVoucher, \"U9e2/NsFTajME2PGEgQfPFJnZLE=\");\n\n_c = AppliedVoucher;\nexport default AppliedVoucher;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppliedVoucher\");","map":{"version":3,"names":["Box","Typography","React","useContext","useEffect","useState","AppBarTop","Voucher1","Voucher2","Voucher3","PADDING","StyledButton","AppContext","voucherModel","axios","AppliedVoucher","items","setItems","useVoucher","setUseVoucher","APIVoucher","setAPIVoucher","flag","setFlag","localStorage","getItem","getAPI","vouchers","console","log","v_use","handleVoucher","i","id","patch","error","width","display","flexDirection","justifyContent","alignItems","map","foods","borderRadius","border","marginTop","overflow","v_image","marginLeft","marginRight","fontSize","fontWeight","v_title","mb","color","marginBottom","v_date"],"sources":["C:/Users/gaudh/OneDrive/Documents/MPPL/mangan-mppl/frontend/src/pages/AppliedVoucher.js"],"sourcesContent":["import { Box, Typography } from '@mui/material'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport AppBarTop from '../components/AppBarTop'\r\nimport Voucher1 from '../assets/voucher/Voucher1.png'\r\nimport Voucher2 from '../assets/voucher/Voucher2.png'\r\nimport Voucher3 from '../assets/voucher/Voucher2.png'\r\nimport { PADDING } from \"../constants/Padding\";\r\nimport StyledButton from '../components/StyledButton'\r\nimport { AppContext } from '../App'\r\nimport { voucherModel } from '../components/API/GetAPI'\r\nimport axios from 'axios'\r\n\r\nfunction AppliedVoucher() {\r\n  const [items, setItems] = useState([]);\r\n  const [useVoucher, setUseVoucher] = useState()\r\n  const {\r\n    APIVoucher,\r\n    setAPIVoucher\r\n  } = useContext(AppContext);\r\n  const [flag, setFlag] = useState(1)\r\n\r\n  useEffect(() => {\r\n    const items = localStorage.getItem(\"items\");\r\n    if (items) setItems(items);\r\n    getAPI(items);\r\n  }, []);\r\n\r\n  const getAPI = async (items) => {\r\n    const vouchers = await voucherModel(items);\r\n    console.log(vouchers)\r\n    setAPIVoucher(vouchers);\r\n    if(flag) {\r\n      setUseVoucher(vouchers[0].v_use)\r\n      setFlag(0)\r\n    }\r\n\r\n  }\r\n\r\n  const handleVoucher = async (i) => {\r\n    console.log(APIVoucher[i].id, useVoucher)\r\n    if(useVoucher == true) \r\n      setUseVoucher(false)\r\n    else \r\n      setUseVoucher(true) \r\n    console.log(useVoucher)\r\n    try {\r\n      await axios.patch(`http://localhost:8080/vouchers/${APIVoucher[i].id}`, {\r\n        v_use: APIVoucher[i].v_use == false? true :false\r\n      });\r\n      \r\n      \r\n      // navigate(\"/locationlist\");\r\n    } catch (error) {\r\n      console.log(error); \r\n    }\r\n\r\n    getAPI(items)\r\n  }\r\n\r\n  return (\r\n    <Box\r\n    sx={{\r\n      width: \"100%\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"center\",\r\n    }}\r\n  >\r\n    <AppBarTop text={\"Voucher\"} line/>\r\n    {APIVoucher.map((foods, i) => (\r\n                   \r\n                   <Box\r\n                   sx={{borderRadius: '8px', border: '1px solid #f2f2f2', width: PADDING, marginTop: '25px', overflow: 'hidden'}}\r\n               >\r\n                   <img src={APIVoucher[i].v_image} alt=\"voucher\" width={\"100%\"} height={\"140px\"}/>\r\n                   <Box sx={{marginLeft: '13px', marginTop: '10px', marginRight: '13px'}}>\r\n                   <Typography sx={{fontSize: '14px', fontWeight: 600}}>{APIVoucher[i].v_title}</Typography>\r\n                   <Box sx={{display: 'flex', justifyContent: 'space-between', mb: '5px'}}>\r\n                   <Typography\r\n                    sx={{color: '#808080', fontSize: '10px', fontWeight: 500, marginTop: '4px', marginBottom: '15px'}}\r\n                   >\r\n                    {APIVoucher[i].v_date}\r\n                   </Typography>\r\n                   <StyledButton width={\"30px\"} text={useVoucher? \"Dipakai\" : \"Pakai\"} height={\"20px\"} borderRadius={\"3px\"} noShadow fontSize={\"12px\"} onClick={()=>handleVoucher(i)}/>\r\n                   </Box>\r\n                   </Box>\r\n                   {console.log(APIVoucher[i].v_use, useVoucher)}\r\n               </Box>\r\n               \r\n              \r\n\r\n                    ))\r\n                  }\r\n\r\n        \r\n       \r\n    \r\n\r\n  </Box>\r\n  )\r\n}\r\n\r\nexport default AppliedVoucher"],"mappings":"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"},"metadata":{},"sourceType":"module"}